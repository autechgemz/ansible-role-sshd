---
driver:
  name: docker

platforms:
  - name: ubuntu-jammy-sshd-test
    image: ubuntu-sshd-test:jammy
    build_image: true
    dockerfile: Dockerfile.ubuntu.jammy
    command: /usr/sbin/sshd -D -e
    privileged: false
  - name: ubuntu-noble-sshd-test
    image: ubuntu-sshd-test:noble
    build_image: true
    dockerfile: Dockerfile.ubuntu.noble
    command: /usr/sbin/sshd -D -e
    privileged: false

scenario:
  test_sequence:
    - dependency
    - destroy
    - syntax
    - create
    - prepare
    - converge
    - idempotence
    - verify
    - destroy

provisioner:
  name: ansible
  playbooks:
    converge: converge.yml
    prepare: prepare.yml
  requirements_file: requirements.yml
  inventory:
    host_vars: {}
  config_options:
    defaults:
      stdout_callback: yaml
  env:
    ANSIBLE_DEPRECATION_WARNINGS: "False"

dependency:
  name: galaxy
  options:
    role-file: requirements.yml
    requirements-file: requirements.yml
    ignore-certs: true

verifier:
  name: ansible
